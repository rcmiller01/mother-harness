src/approval-service.ts(248,21): error TS6133: 'step' is declared but its value is never read.
src/memory/tier1-recent.ts(39,15): error TS2375: Type '{ id: string; role: "assistant"; content: string; agent_invoked: AgentType | undefined; timestamp: string; }' is not assignable to type 'Message' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'agent_invoked' are incompatible.
    Type 'AgentType | undefined' is not assignable to type 'AgentType'.
      Type 'undefined' is not assignable to type 'AgentType'.
src/memory/tier3-longterm.ts(58,13): error TS6133: 'redisClient' is declared but its value is never read.
src/metrics.ts(6,1): error TS6133: 'getRedisClient' is declared but its value is never read.
src/n8n-adapter.ts(72,17): error TS2375: Type '{ success: true; data: unknown; execution_id: string | undefined; duration_ms: number; }' is not assignable to type 'WorkflowResult' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'execution_id' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/n8n-adapter.ts(278,9): error TS2375: Type '{ type: WorkflowErrorType; message: string; status_code: number | undefined; details: unknown; }' is not assignable to type 'WorkflowError' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'status_code' are incompatible.
    Type 'number | undefined' is not assignable to type 'number'.
      Type 'undefined' is not assignable to type 'number'.
src/ollama-adapter.ts(39,13): error TS6133: 'cloudUrl' is declared but its value is never read.
src/ollama-adapter.ts(40,13): error TS6133: 'cloudApiKey' is declared but its value is never read.
src/orchestrator.ts(78,11): error TS2322: Type '(inputs: string, context: Record<string, unknown>) => Promise<{ success: boolean; outputs: Record<string, unknown>; artifacts: string[] | undefined; explanation: string | undefined; tokens_used: number; duration_ms: number; model_used: string; }>' is not assignable to type 'AgentExecutor'.
  Type 'Promise<{ success: boolean; outputs: Record<string, unknown>; artifacts: string[] | undefined; explanation: string | undefined; tokens_used: number; duration_ms: number; model_used: string; }>' is not assignable to type 'Promise<AgentResult>'.
    Type '{ success: boolean; outputs: Record<string, unknown>; artifacts: string[] | undefined; explanation: string | undefined; tokens_used: number; duration_ms: number; model_used: string; }' is not assignable to type 'AgentResult' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
      Types of property 'artifacts' are incompatible.
        Type 'string[] | undefined' is not assignable to type 'string[]'.
          Type 'undefined' is not assignable to type 'string[]'.
src/orchestrator.ts(80,15): error TS2375: Type '{ task_id: string; step_id: string; project_id: string; user_id: string; recent_context: string | undefined; rag_context: string | undefined; library_ids: string[] | undefined; }' is not assignable to type 'AgentContext' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'recent_context' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/orchestrator.ts(195,9): error TS2375: Type '{ id: string; created_at: string; status: "created" | "executing" | "waiting_approval" | "terminated"; project_id: string; user_id: string; updated_at: string; task_id: string; started_at?: string | undefined; ... 4 more ...; termination_details?: string | undefined; }' is not assignable to type 'Run' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'started_at' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/orchestrator.ts(210,27): error TS2379: Argument of type '{ id: string; created_at: string; status: "created" | "executing" | "waiting_approval" | "terminated"; project_id: string; user_id: string; updated_at: string; task_id: string; started_at?: string | undefined; ... 4 more ...; termination_details?: string | undefined; }' is not assignable to parameter of type 'Run' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'started_at' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/orchestrator.ts(244,28): error TS2379: Argument of type '{ id: string; created_at: string; updated_at: string; name: string; chunk_count: number; folder_path: string; document_count: number; total_size_bytes: number; last_scanned: string; scan_status: "idle" | ... 1 more ... | "processing"; ... 4 more ...; scan_schedule?: string | undefined; }' is not assignable to parameter of type 'Library' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'description' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/orchestrator.ts(392,9): error TS2375: Type '{ type: "design" | "code" | "analysis" | "research" | "mixed"; id: string; created_at: string; status: "completed" | "failed" | "executing" | "planning" | "approval_needed"; project_id: string; ... 9 more ...; completed_at?: string | undefined; }' is not assignable to type 'Task' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'todo_list' are incompatible.
    Type '{ id: string; status: "pending" | "in_progress" | "completed" | "failed"; description: string; agent: "orchestrator" | "researcher" | "coder" | "design" | "analyst" | "critic" | "skeptic" | ... 4 more ... | "toolsmith"; ... 7 more ...; started_at?: string | undefined; }[]' is not assignable to type 'TodoItem[]'.
      Type '{ id: string; status: "pending" | "in_progress" | "completed" | "failed"; description: string; agent: "orchestrator" | "researcher" | "coder" | "design" | "analyst" | "critic" | "skeptic" | ... 4 more ... | "toolsmith"; ... 7 more ...; started_at?: string | undefined; }' is not assignable to type 'TodoItem' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
        Types of property 'require_approval' are incompatible.
          Type 'boolean | undefined' is not assignable to type 'boolean'.
            Type 'undefined' is not assignable to type 'boolean'.
src/orchestrator.ts(445,40): error TS2379: Argument of type '{ reason: TerminationReason; details: string; total_tokens: number; total_duration_ms: number; last_step_id: string | undefined; last_agent: AgentType | undefined; }' is not assignable to parameter of type '{ reason: TerminationReason; details: string; total_tokens: number; total_duration_ms: number; last_step_id?: string; last_agent?: AgentType; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'last_step_id' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/orchestrator.ts(692,9): error TS2375: Type '{ status: "completed"; termination_reason: "completed"; termination_details: string; total_tokens: number; total_duration_ms: number; last_step_id: string | undefined; last_agent: AgentType | undefined; }' is not assignable to type '{ status: "completed" | "failed" | "approval_needed"; termination_reason: TerminationReason; termination_details: string; total_tokens: number; total_duration_ms: number; last_step_id?: string; last_agent?: AgentType; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'last_step_id' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/orchestrator.ts(884,45): error TS6133: 'userId' is declared but its value is never read.
src/orchestrator.ts(1038,15): error TS2375: Type '{ run_id: string; task_id: string; project_id: string; user_id: string; reason: TerminationReason; details: string; last_step_id: string | undefined; last_agent: AgentType | undefined; ... 5 more ...; terminated_at: string; }' is not assignable to type 'TerminationRecord' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'last_step_id' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/orchestrator.ts(1089,35): error TS2345: Argument of type '{ type: "design" | "code" | "research" | "mixed"; id: string; created_at: string; status: "completed" | "active" | "archived"; updated_at: string; name: string; threads: string[]; recent_messages: { ...; }[]; session_summaries: { ...; }[]; last_activity: string; }' is not assignable to parameter of type 'Project'.
  Types of property 'recent_messages' are incompatible.
    Type '{ id: string; timestamp: string; content: string; role: "user" | "system" | "assistant"; agent_invoked?: "orchestrator" | "researcher" | "coder" | "design" | "analyst" | "critic" | "skeptic" | ... 5 more ... | undefined; }[]' is not assignable to type 'Message[]'.
      Type '{ id: string; timestamp: string; content: string; role: "user" | "system" | "assistant"; agent_invoked?: "orchestrator" | "researcher" | "coder" | "design" | "analyst" | "critic" | "skeptic" | ... 5 more ... | undefined; }' is not assignable to type 'Message' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
        Types of property 'agent_invoked' are incompatible.
          Type '"orchestrator" | "researcher" | "coder" | "design" | "analyst" | "critic" | "skeptic" | "rag" | "librarian" | "vision" | "update" | "toolsmith" | undefined' is not assignable to type 'AgentType'.
            Type 'undefined' is not assignable to type 'AgentType'.
src/orchestrator.ts(1109,36): error TS2379: Argument of type '{ type: "file_write" | "code_execution" | "git_push" | "workflow_creation" | "api_call"; id: string; created_at: string; status: "pending" | "approved" | "rejected"; project_id: string; ... 9 more ...; expires_at?: string | undefined; }' is not assignable to parameter of type 'Approval' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  The types of 'preview.files' are incompatible between these types.
    Type 'string[] | undefined' is not assignable to type 'string[]'.
      Type 'undefined' is not assignable to type 'string[]'.
src/orchestrator.ts(1166,28): error TS6133: 'taskId' is declared but its value is never read.
src/planner.ts(38,37): error TS6133: 'context' is declared but its value is never read.
src/server.ts(24,1): error TS6133: 'getCostTracker' is declared but its value is never read.
src/server.ts(33,5): error TS2769: No overload matches this call.
  The last overload gave the following error.
    Type '{ level: string; transport: { target: string; } | undefined; }' is not assignable to type 'boolean | FastifyBaseLogger | (FastifyLoggerOptions<Server<typeof IncomingMessage, typeof ServerResponse>, FastifyRequest<RouteGenericInterface, ... 6 more ..., ResolveFastifyRequestType<...>>, FastifyReply<...>> & PinoLoggerOptions) | undefined'.
      Type '{ level: string; transport: { target: string; } | undefined; }' is not assignable to type 'FastifyLoggerOptions<Server<typeof IncomingMessage, typeof ServerResponse>, FastifyRequest<RouteGenericInterface, Server<typeof IncomingMessage, typeof ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>, FastifyReply<...>> & PinoLoggerOptions' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
        Type '{ level: string; transport: { target: string; } | undefined; }' is not assignable to type 'PinoLoggerOptions' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
          Types of property 'transport' are incompatible.
            Type '{ target: string; } | undefined' is not assignable to type 'TransportSingleOptions<Record<string, any>> | TransportMultiOptions<Record<string, any>> | TransportPipelineOptions<Record<string, any>>'.
              Type 'undefined' is not assignable to type 'TransportSingleOptions<Record<string, any>> | TransportMultiOptions<Record<string, any>> | TransportPipelineOptions<Record<string, any>>'.
src/server.ts(147,24): error TS2345: Argument of type 'FastifyInstance<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, Http2ServerRequest, Http2ServerResponse<...>, FastifyBaseLogger, FastifyTypeProviderDefault> & PromiseLike<...>' is not assignable to parameter of type 'FastifyInstance<RawServerDefault, IncomingMessage, ServerResponse<IncomingMessage>, FastifyBaseLogger, FastifyTypeProviderDefault>'.
  Types of property 'server' are incompatible.
    Type 'Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>' is missing the following properties from type 'Server<typeof IncomingMessage, typeof ServerResponse>': maxHeadersCount, maxRequestsPerSocket, timeout, headersTimeout, and 4 more.
src/server.ts(162,24): error TS2769: No overload matches this call.
  Overload 1 of 4, '(path: string, opts: RouteShorthandOptions<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> & { ...; }, handler?: WebsocketHandler<...> | undefined): FastifyInstance<...>', gave the following error.
    Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> | preHandlerHookHandler<...>[]'.
      Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>'.
        Types of parameters 'request' and 'request' are incompatible.
          Type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>' is not assignable to type 'FastifyRequest<RouteGenericInterface, RawServerDefault, IncomingMessage, FastifySchema, FastifyTypeProviderDefault, unknown, FastifyBaseLogger, ResolveFastifyRequestType<...>>' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
            Type 'Http2ServerRequest' is missing the following properties from type 'IncomingMessage': headersDistinct, trailersDistinct
  Overload 2 of 4, '(path: string, opts: RouteShorthandOptions<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>, handler: RouteHandlerMethod<...>): FastifyInstance<...>', gave the following error.
    Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> | preHandlerHookHandler<...>[]'.
      Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>'.
        Types of parameters 'request' and 'request' are incompatible.
          Type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>' is not assignable to type 'FastifyRequest<RouteGenericInterface, RawServerDefault, IncomingMessage, FastifySchema, FastifyTypeProviderDefault, unknown, FastifyBaseLogger, ResolveFastifyRequestType<...>>' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
            Type 'Http2ServerRequest' is missing the following properties from type 'IncomingMessage': headersDistinct, trailersDistinct
src/server.ts(163,26): error TS2339: Property 'body' does not exist on type 'SocketStream'.
src/server.ts(171,73): error TS2379: Argument of type '{ allowedLibraryIds: string[] | undefined; }' is not assignable to parameter of type 'LibraryAccessPolicy' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'allowedLibraryIds' are incompatible.
    Type 'string[] | undefined' is not assignable to type 'string[]'.
      Type 'undefined' is not assignable to type 'string[]'.
src/server.ts(176,15): error TS2339: Property 'status' does not exist on type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>'.
src/server.ts(195,15): error TS2339: Property 'status' does not exist on type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>'.
src/server.ts(269,60): error TS2379: Argument of type '{ limit: number | undefined; direction: "forward" | "backward" | undefined; }' is not assignable to parameter of type '{ limit?: number; direction?: "forward" | "backward"; }' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'limit' are incompatible.
    Type 'number | undefined' is not assignable to type 'number'.
      Type 'undefined' is not assignable to type 'number'.
src/server.ts(319,28): error TS2769: No overload matches this call.
  Overload 1 of 4, '(path: string, opts: RouteShorthandOptions<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> & { ...; }, handler?: WebsocketHandler<...> | undefined): FastifyInstance<...>', gave the following error.
    Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> | preHandlerHookHandler<...>[]'.
      Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>'.
        Types of parameters 'request' and 'request' are incompatible.
          Type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>' is not assignable to type 'FastifyRequest<RouteGenericInterface, RawServerDefault, IncomingMessage, FastifySchema, FastifyTypeProviderDefault, unknown, FastifyBaseLogger, ResolveFastifyRequestType<...>>' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
            Type 'Http2ServerRequest' is missing the following properties from type 'IncomingMessage': headersDistinct, trailersDistinct
  Overload 2 of 4, '(path: string, opts: RouteShorthandOptions<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>, handler: RouteHandlerMethod<...>): FastifyInstance<...>', gave the following error.
    Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> | preHandlerHookHandler<...>[]'.
      Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>'.
        Types of parameters 'request' and 'request' are incompatible.
          Type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>' is not assignable to type 'FastifyRequest<RouteGenericInterface, RawServerDefault, IncomingMessage, FastifySchema, FastifyTypeProviderDefault, unknown, FastifyBaseLogger, ResolveFastifyRequestType<...>>' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
            Type 'Http2ServerRequest' is missing the following properties from type 'IncomingMessage': headersDistinct, trailersDistinct
src/server.ts(320,33): error TS2339: Property 'query' does not exist on type 'SocketStream'.
src/server.ts(326,37): error TS2769: No overload matches this call.
  Overload 1 of 4, '(path: string, opts: RouteShorthandOptions<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> & { ...; }, handler?: WebsocketHandler<...> | undefined): FastifyInstance<...>', gave the following error.
    Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> | preHandlerHookHandler<...>[]'.
      Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>'.
        Types of parameters 'request' and 'request' are incompatible.
          Type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>' is not assignable to type 'FastifyRequest<RouteGenericInterface, RawServerDefault, IncomingMessage, FastifySchema, FastifyTypeProviderDefault, unknown, FastifyBaseLogger, ResolveFastifyRequestType<...>>' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
            Type 'Http2ServerRequest' is missing the following properties from type 'IncomingMessage': headersDistinct, trailersDistinct
  Overload 2 of 4, '(path: string, opts: RouteShorthandOptions<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>, handler: RouteHandlerMethod<...>): FastifyInstance<...>', gave the following error.
    Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> | preHandlerHookHandler<...>[]'.
      Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>'.
        Types of parameters 'request' and 'request' are incompatible.
          Type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>' is not assignable to type 'FastifyRequest<RouteGenericInterface, RawServerDefault, IncomingMessage, FastifySchema, FastifyTypeProviderDefault, unknown, FastifyBaseLogger, ResolveFastifyRequestType<...>>' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
            Type 'Http2ServerRequest' is missing the following properties from type 'IncomingMessage': headersDistinct, trailersDistinct
src/server.ts(331,42): error TS2769: No overload matches this call.
  Overload 1 of 4, '(path: string, opts: RouteShorthandOptions<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> & { ...; }, handler?: WebsocketHandler<...> | undefined): FastifyInstance<...>', gave the following error.
    Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> | preHandlerHookHandler<...>[]'.
      Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>'.
        Types of parameters 'request' and 'request' are incompatible.
          Type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>' is not assignable to type 'FastifyRequest<RouteGenericInterface, RawServerDefault, IncomingMessage, FastifySchema, FastifyTypeProviderDefault, unknown, FastifyBaseLogger, ResolveFastifyRequestType<...>>' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
            Type 'Http2ServerRequest' is missing the following properties from type 'IncomingMessage': headersDistinct, trailersDistinct
  Overload 2 of 4, '(path: string, opts: RouteShorthandOptions<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>, handler: RouteHandlerMethod<...>): FastifyInstance<...>', gave the following error.
    Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> | preHandlerHookHandler<...>[]'.
      Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>'.
        Types of parameters 'request' and 'request' are incompatible.
          Type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>' is not assignable to type 'FastifyRequest<RouteGenericInterface, RawServerDefault, IncomingMessage, FastifySchema, FastifyTypeProviderDefault, unknown, FastifyBaseLogger, ResolveFastifyRequestType<...>>' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
            Type 'Http2ServerRequest' is missing the following properties from type 'IncomingMessage': headersDistinct, trailersDistinct
src/server.ts(332,28): error TS2339: Property 'params' does not exist on type 'SocketStream'.
src/server.ts(333,41): error TS2339: Property 'body' does not exist on type 'SocketStream'.
src/server.ts(341,13): error TS2375: Type '{ user_id: string; email: string | undefined; roles: string[]; }' is not assignable to type 'AuditActor' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'email' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
src/server.ts(358,15): error TS2339: Property 'status' does not exist on type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>'.
src/server.ts(417,36): error TS2769: No overload matches this call.
  Overload 1 of 4, '(path: string, opts: RouteShorthandOptions<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> & { ...; }, handler?: WebsocketHandler<...> | undefined): FastifyInstance<...>', gave the following error.
    Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> | preHandlerHookHandler<...>[]'.
      Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>'.
        Types of parameters 'request' and 'request' are incompatible.
          Type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>' is not assignable to type 'FastifyRequest<RouteGenericInterface, RawServerDefault, IncomingMessage, FastifySchema, FastifyTypeProviderDefault, unknown, FastifyBaseLogger, ResolveFastifyRequestType<...>>' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
            Type 'Http2ServerRequest' is missing the following properties from type 'IncomingMessage': headersDistinct, trailersDistinct
  Overload 2 of 4, '(path: string, opts: RouteShorthandOptions<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>, handler: RouteHandlerMethod<...>): FastifyInstance<...>', gave the following error.
    Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> | preHandlerHookHandler<...>[]'.
      Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>'.
        Types of parameters 'request' and 'request' are incompatible.
          Type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>' is not assignable to type 'FastifyRequest<RouteGenericInterface, RawServerDefault, IncomingMessage, FastifySchema, FastifyTypeProviderDefault, unknown, FastifyBaseLogger, ResolveFastifyRequestType<...>>' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
            Type 'Http2ServerRequest' is missing the following properties from type 'IncomingMessage': headersDistinct, trailersDistinct
src/server.ts(418,45): error TS2339: Property 'query' does not exist on type 'SocketStream'.
src/server.ts(479,15): error TS2339: Property 'status' does not exist on type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>'.
src/server.ts(484,35): error TS2769: No overload matches this call.
  Overload 1 of 4, '(path: string, opts: RouteShorthandOptions<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> & { ...; }, handler?: WebsocketHandler<...> | undefined): FastifyInstance<...>', gave the following error.
    Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> | preHandlerHookHandler<...>[]'.
      Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>'.
        Types of parameters 'request' and 'request' are incompatible.
          Type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>' is not assignable to type 'FastifyRequest<RouteGenericInterface, RawServerDefault, IncomingMessage, FastifySchema, FastifyTypeProviderDefault, unknown, FastifyBaseLogger, ResolveFastifyRequestType<...>>' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
            Type 'Http2ServerRequest' is missing the following properties from type 'IncomingMessage': headersDistinct, trailersDistinct
  Overload 2 of 4, '(path: string, opts: RouteShorthandOptions<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>, handler: RouteHandlerMethod<...>): FastifyInstance<...>', gave the following error.
    Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> | preHandlerHookHandler<...>[]'.
      Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>'.
        Types of parameters 'request' and 'request' are incompatible.
          Type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>' is not assignable to type 'FastifyRequest<RouteGenericInterface, RawServerDefault, IncomingMessage, FastifySchema, FastifyTypeProviderDefault, unknown, FastifyBaseLogger, ResolveFastifyRequestType<...>>' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
            Type 'Http2ServerRequest' is missing the following properties from type 'IncomingMessage': headersDistinct, trailersDistinct
src/server.ts(486,33): error TS2339: Property 'query' does not exist on type 'SocketStream'.
src/server.ts(526,15): error TS2339: Property 'status' does not exist on type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>'.
src/server.ts(532,35): error TS2769: No overload matches this call.
  Overload 1 of 4, '(path: string, opts: RouteShorthandOptions<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> & { ...; }, handler?: WebsocketHandler<...> | undefined): FastifyInstance<...>', gave the following error.
    Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> | preHandlerHookHandler<...>[]'.
      Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>'.
        Types of parameters 'request' and 'request' are incompatible.
          Type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>' is not assignable to type 'FastifyRequest<RouteGenericInterface, RawServerDefault, IncomingMessage, FastifySchema, FastifyTypeProviderDefault, unknown, FastifyBaseLogger, ResolveFastifyRequestType<...>>' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
            Type 'Http2ServerRequest' is missing the following properties from type 'IncomingMessage': headersDistinct, trailersDistinct
  Overload 2 of 4, '(path: string, opts: RouteShorthandOptions<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>, handler: RouteHandlerMethod<...>): FastifyInstance<...>', gave the following error.
    Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger> | preHandlerHookHandler<...>[]'.
      Type '(request: FastifyRequest, reply: FastifyReply) => Promise<void>' is not assignable to type 'preHandlerHookHandler<Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 6 more ..., FastifyBaseLogger>'.
        Types of parameters 'request' and 'request' are incompatible.
          Type 'FastifyRequest<RouteGenericInterface, Http2SecureServer<typeof IncomingMessage, typeof ServerResponse, typeof Http2ServerRequest, typeof Http2ServerResponse>, ... 5 more ..., ResolveFastifyRequestType<...>>' is not assignable to type 'FastifyRequest<RouteGenericInterface, RawServerDefault, IncomingMessage, FastifySchema, FastifyTypeProviderDefault, unknown, FastifyBaseLogger, ResolveFastifyRequestType<...>>' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
            Type 'Http2ServerRequest' is missing the following properties from type 'IncomingMessage': headersDistinct, trailersDistinct
src/server.ts(579,13): error TS2375: Type '{ user_id: string; email: string | undefined; roles: string[]; }' is not assignable to type 'AuditActor' with 'exactOptionalPropertyTypes: true'. Consider adding 'undefined' to the types of the target's properties.
  Types of property 'email' are incompatible.
    Type 'string | undefined' is not assignable to type 'string'.
      Type 'undefined' is not assignable to type 'string'.
