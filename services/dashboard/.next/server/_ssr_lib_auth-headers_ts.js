"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_lib_auth-headers_ts";
exports.ids = ["_ssr_lib_auth-headers_ts"];
exports.modules = {

/***/ "(ssr)/./lib/auth-headers.ts":
/*!*****************************!*\
  !*** ./lib/auth-headers.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearToken: () => (/* binding */ clearToken),\n/* harmony export */   getAuthHeaders: () => (/* binding */ getAuthHeaders),\n/* harmony export */   getStoredToken: () => (/* binding */ getStoredToken),\n/* harmony export */   getUserFromToken: () => (/* binding */ getUserFromToken),\n/* harmony export */   isAuthenticated: () => (/* binding */ isAuthenticated),\n/* harmony export */   storeToken: () => (/* binding */ storeToken)\n/* harmony export */ });\n/**\r\n * Auth Headers Utility\r\n * Centralized token management for API requests\r\n * Supports both JWT and dev-mode API keys\r\n */ const TOKEN_KEY = \"mother-harness-token\";\nconst DEV_API_KEY = \"mother-harness-dev-bypass-2024\";\n/**\r\n * Get stored auth token\r\n */ function getStoredToken() {\n    if (true) return null;\n    return localStorage.getItem(TOKEN_KEY);\n}\n/**\r\n * Store auth token\r\n */ function storeToken(token) {\n    if (false) {}\n}\n/**\r\n * Clear auth token\r\n */ function clearToken() {\n    if (false) {}\n}\n/**\r\n * Get auth headers for API requests\r\n * Automatically handles:\r\n * - JWT Bearer token (from localStorage)\r\n * - Dev mode API key (from env var, for homelab)\r\n */ function getAuthHeaders() {\n    const headers = {};\n    // Priority 1: JWT token\n    const token = getStoredToken();\n    if (token) {\n        headers[\"Authorization\"] = `Bearer ${token}`;\n        return headers;\n    }\n    // Priority 2: Dev mode API key (for homelab without auth)\n    if (DEV_API_KEY) {\n        headers[\"X-API-Key\"] = DEV_API_KEY;\n        return headers;\n    }\n    return headers;\n}\n/**\r\n * Check if user is authenticated\r\n */ function isAuthenticated() {\n    const token = getStoredToken();\n    if (!token) return false;\n    // Check if token is expired\n    try {\n        const parts = token.split(\".\");\n        if (parts.length !== 3) return false;\n        const payload = JSON.parse(atob(parts[1].replace(/-/g, \"+\").replace(/_/g, \"/\")));\n        if (payload.exp && payload.exp < Date.now() / 1000) {\n            clearToken();\n            return false;\n        }\n        return true;\n    } catch  {\n        return false;\n    }\n}\n/**\r\n * Get user info from token\r\n */ function getUserFromToken() {\n    const token = getStoredToken();\n    if (!token) return null;\n    try {\n        const parts = token.split(\".\");\n        if (parts.length !== 3) return null;\n        const payload = JSON.parse(atob(parts[1].replace(/-/g, \"+\").replace(/_/g, \"/\")));\n        if (payload.exp && payload.exp < Date.now() / 1000) {\n            return null;\n        }\n        return {\n            id: payload.sub,\n            email: payload.email,\n            name: payload.name,\n            roles: payload.roles ?? [\n                \"user\"\n            ]\n        };\n    } catch  {\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9saWIvYXV0aC1oZWFkZXJzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOzs7O0NBSUMsR0FFRCxNQUFNQSxZQUFZO0FBQ2xCLE1BQU1DLGNBQWNDLGdDQUFtQztBQUV2RDs7Q0FFQyxHQUNNLFNBQVNHO0lBQ1osSUFBSSxJQUFrQixFQUFhLE9BQU87SUFDMUMsT0FBT0MsYUFBYUMsT0FBTyxDQUFDUDtBQUNoQztBQUVBOztDQUVDLEdBQ00sU0FBU1EsV0FBV0MsS0FBYTtJQUNwQyxJQUFJLEtBQWtCLEVBQWEsRUFFbEM7QUFDTDtBQUVBOztDQUVDLEdBQ00sU0FBU0U7SUFDWixJQUFJLEtBQWtCLEVBQWEsRUFFbEM7QUFDTDtBQUVBOzs7OztDQUtDLEdBQ00sU0FBU0U7SUFDWixNQUFNQyxVQUFrQyxDQUFDO0lBRXpDLHdCQUF3QjtJQUN4QixNQUFNTCxRQUFRSjtJQUNkLElBQUlJLE9BQU87UUFDUEssT0FBTyxDQUFDLGdCQUFnQixHQUFHLENBQUMsT0FBTyxFQUFFTCxNQUFNLENBQUM7UUFDNUMsT0FBT0s7SUFDWDtJQUVBLDBEQUEwRDtJQUMxRCxJQUFJYixhQUFhO1FBQ2JhLE9BQU8sQ0FBQyxZQUFZLEdBQUdiO1FBQ3ZCLE9BQU9hO0lBQ1g7SUFFQSxPQUFPQTtBQUNYO0FBRUE7O0NBRUMsR0FDTSxTQUFTQztJQUNaLE1BQU1OLFFBQVFKO0lBQ2QsSUFBSSxDQUFDSSxPQUFPLE9BQU87SUFFbkIsNEJBQTRCO0lBQzVCLElBQUk7UUFDQSxNQUFNTyxRQUFRUCxNQUFNUSxLQUFLLENBQUM7UUFDMUIsSUFBSUQsTUFBTUUsTUFBTSxLQUFLLEdBQUcsT0FBTztRQUUvQixNQUFNQyxVQUFVQyxLQUFLQyxLQUFLLENBQUNDLEtBQUtOLEtBQUssQ0FBQyxFQUFFLENBQUVPLE9BQU8sQ0FBQyxNQUFNLEtBQUtBLE9BQU8sQ0FBQyxNQUFNO1FBQzNFLElBQUlKLFFBQVFLLEdBQUcsSUFBSUwsUUFBUUssR0FBRyxHQUFHQyxLQUFLQyxHQUFHLEtBQUssTUFBTTtZQUNoRGY7WUFDQSxPQUFPO1FBQ1g7UUFDQSxPQUFPO0lBQ1gsRUFBRSxPQUFNO1FBQ0osT0FBTztJQUNYO0FBQ0o7QUFFQTs7Q0FFQyxHQUNNLFNBQVNnQjtJQUNaLE1BQU1sQixRQUFRSjtJQUNkLElBQUksQ0FBQ0ksT0FBTyxPQUFPO0lBRW5CLElBQUk7UUFDQSxNQUFNTyxRQUFRUCxNQUFNUSxLQUFLLENBQUM7UUFDMUIsSUFBSUQsTUFBTUUsTUFBTSxLQUFLLEdBQUcsT0FBTztRQUUvQixNQUFNQyxVQUFVQyxLQUFLQyxLQUFLLENBQUNDLEtBQUtOLEtBQUssQ0FBQyxFQUFFLENBQUVPLE9BQU8sQ0FBQyxNQUFNLEtBQUtBLE9BQU8sQ0FBQyxNQUFNO1FBRTNFLElBQUlKLFFBQVFLLEdBQUcsSUFBSUwsUUFBUUssR0FBRyxHQUFHQyxLQUFLQyxHQUFHLEtBQUssTUFBTTtZQUNoRCxPQUFPO1FBQ1g7UUFFQSxPQUFPO1lBQ0hFLElBQUlULFFBQVFVLEdBQUc7WUFDZkMsT0FBT1gsUUFBUVcsS0FBSztZQUNwQkMsTUFBTVosUUFBUVksSUFBSTtZQUNsQkMsT0FBT2IsUUFBUWEsS0FBSyxJQUFJO2dCQUFDO2FBQU87UUFDcEM7SUFDSixFQUFFLE9BQU07UUFDSixPQUFPO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL0Btb3RoZXItaGFybmVzcy9kYXNoYm9hcmQvLi9saWIvYXV0aC1oZWFkZXJzLnRzPzc2ZDMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEF1dGggSGVhZGVycyBVdGlsaXR5XHJcbiAqIENlbnRyYWxpemVkIHRva2VuIG1hbmFnZW1lbnQgZm9yIEFQSSByZXF1ZXN0c1xyXG4gKiBTdXBwb3J0cyBib3RoIEpXVCBhbmQgZGV2LW1vZGUgQVBJIGtleXNcclxuICovXHJcblxyXG5jb25zdCBUT0tFTl9LRVkgPSAnbW90aGVyLWhhcm5lc3MtdG9rZW4nO1xyXG5jb25zdCBERVZfQVBJX0tFWSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFVl9BUElfS0VZO1xyXG5cclxuLyoqXHJcbiAqIEdldCBzdG9yZWQgYXV0aCB0b2tlblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0b3JlZFRva2VuKCk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gbnVsbDtcclxuICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShUT0tFTl9LRVkpO1xyXG59XHJcblxyXG4vKipcclxuICogU3RvcmUgYXV0aCB0b2tlblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlVG9rZW4odG9rZW46IHN0cmluZyk6IHZvaWQge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oVE9LRU5fS0VZLCB0b2tlbik7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGVhciBhdXRoIHRva2VuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJUb2tlbigpOiB2b2lkIHtcclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFRPS0VOX0tFWSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgYXV0aCBoZWFkZXJzIGZvciBBUEkgcmVxdWVzdHNcclxuICogQXV0b21hdGljYWxseSBoYW5kbGVzOlxyXG4gKiAtIEpXVCBCZWFyZXIgdG9rZW4gKGZyb20gbG9jYWxTdG9yYWdlKVxyXG4gKiAtIERldiBtb2RlIEFQSSBrZXkgKGZyb20gZW52IHZhciwgZm9yIGhvbWVsYWIpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXV0aEhlYWRlcnMoKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XHJcbiAgICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XHJcblxyXG4gICAgLy8gUHJpb3JpdHkgMTogSldUIHRva2VuXHJcbiAgICBjb25zdCB0b2tlbiA9IGdldFN0b3JlZFRva2VuKCk7XHJcbiAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICBoZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7dG9rZW59YDtcclxuICAgICAgICByZXR1cm4gaGVhZGVycztcclxuICAgIH1cclxuXHJcbiAgICAvLyBQcmlvcml0eSAyOiBEZXYgbW9kZSBBUEkga2V5IChmb3IgaG9tZWxhYiB3aXRob3V0IGF1dGgpXHJcbiAgICBpZiAoREVWX0FQSV9LRVkpIHtcclxuICAgICAgICBoZWFkZXJzWydYLUFQSS1LZXknXSA9IERFVl9BUElfS0VZO1xyXG4gICAgICAgIHJldHVybiBoZWFkZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBoZWFkZXJzO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgdXNlciBpcyBhdXRoZW50aWNhdGVkXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgdG9rZW4gPSBnZXRTdG9yZWRUb2tlbigpO1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHRva2VuIGlzIGV4cGlyZWRcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFydHMgPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgICAgIGlmIChwYXJ0cy5sZW5ndGggIT09IDMpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IEpTT04ucGFyc2UoYXRvYihwYXJ0c1sxXSEucmVwbGFjZSgvLS9nLCAnKycpLnJlcGxhY2UoL18vZywgJy8nKSkpO1xyXG4gICAgICAgIGlmIChwYXlsb2FkLmV4cCAmJiBwYXlsb2FkLmV4cCA8IERhdGUubm93KCkgLyAxMDAwKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVG9rZW4oKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB1c2VyIGluZm8gZnJvbSB0b2tlblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJGcm9tVG9rZW4oKTogeyBpZDogc3RyaW5nOyBlbWFpbD86IHN0cmluZzsgbmFtZT86IHN0cmluZzsgcm9sZXM6IHN0cmluZ1tdIH0gfCBudWxsIHtcclxuICAgIGNvbnN0IHRva2VuID0gZ2V0U3RvcmVkVG9rZW4oKTtcclxuICAgIGlmICghdG9rZW4pIHJldHVybiBudWxsO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFydHMgPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgICAgIGlmIChwYXJ0cy5sZW5ndGggIT09IDMpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICBjb25zdCBwYXlsb2FkID0gSlNPTi5wYXJzZShhdG9iKHBhcnRzWzFdIS5yZXBsYWNlKC8tL2csICcrJykucmVwbGFjZSgvXy9nLCAnLycpKSk7XHJcblxyXG4gICAgICAgIGlmIChwYXlsb2FkLmV4cCAmJiBwYXlsb2FkLmV4cCA8IERhdGUubm93KCkgLyAxMDAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWQ6IHBheWxvYWQuc3ViLFxyXG4gICAgICAgICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCxcclxuICAgICAgICAgICAgbmFtZTogcGF5bG9hZC5uYW1lLFxyXG4gICAgICAgICAgICByb2xlczogcGF5bG9hZC5yb2xlcyA/PyBbJ3VzZXInXSxcclxuICAgICAgICB9O1xyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIlRPS0VOX0tFWSIsIkRFVl9BUElfS0VZIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0RFVl9BUElfS0VZIiwiZ2V0U3RvcmVkVG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic3RvcmVUb2tlbiIsInRva2VuIiwic2V0SXRlbSIsImNsZWFyVG9rZW4iLCJyZW1vdmVJdGVtIiwiZ2V0QXV0aEhlYWRlcnMiLCJoZWFkZXJzIiwiaXNBdXRoZW50aWNhdGVkIiwicGFydHMiLCJzcGxpdCIsImxlbmd0aCIsInBheWxvYWQiLCJKU09OIiwicGFyc2UiLCJhdG9iIiwicmVwbGFjZSIsImV4cCIsIkRhdGUiLCJub3ciLCJnZXRVc2VyRnJvbVRva2VuIiwiaWQiLCJzdWIiLCJlbWFpbCIsIm5hbWUiLCJyb2xlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./lib/auth-headers.ts\n");

/***/ })

};
;