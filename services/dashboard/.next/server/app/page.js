(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3817:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>h,pages:()=>c,routeModule:()=>m,tree:()=>a}),t(7144),t(3895),t(8147);var s=t(3397),i=t(1566),n=t(4535),o=t.n(n),d=t(621),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);t.d(r,l);let a=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7144)),"C:\\Users\\rober\\Documents\\mother-harness\\services\\dashboard\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,3895)),"C:\\Users\\rober\\Documents\\mother-harness\\services\\dashboard\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,8147,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\rober\\Documents\\mother-harness\\services\\dashboard\\app\\page.tsx"],h="/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:a}})},876:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,40,23)),Promise.resolve().then(t.t.bind(t,6605,23)),Promise.resolve().then(t.t.bind(t,6932,23)),Promise.resolve().then(t.t.bind(t,9708,23)),Promise.resolve().then(t.t.bind(t,2804,23)),Promise.resolve().then(t.t.bind(t,2028,23))},8739:(e,r,t)=>{Promise.resolve().then(t.bind(t,2761))},6779:(e,r,t)=>{Promise.resolve().then(t.bind(t,167))},2761:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var s=t(7122),i=t(3217),n=t(167);function o(){let{user:e,loading:r,isAuthenticated:t,login:o,logout:d}=(0,n.a)(),[l,a]=(0,i.useState)(""),[c,h]=(0,i.useState)(!1),[p,m]=(0,i.useState)(null),[u,x]=(0,i.useState)([]),[g,y]=(0,i.useState)(null),[j,b]=(0,i.useState)(null),[f,v]=(0,i.useState)(!1),[S,w]=(0,i.useState)(""),[C,P]=(0,i.useState)([]),[k,_]=(0,i.useState)(!1),[R,z]=(0,i.useState)(null),[B,D]=(0,i.useState)(!1),[T,A]=(0,i.useState)(""),[I,O]=(0,i.useState)(""),[M,W]=(0,i.useState)(""),q=e?.id??"anonymous",E=async()=>{if(e?.id){_(!0);try{let r=await fetch(`/api/projects?user_id=${encodeURIComponent(e.id)}`,{headers:(0,n.g)()}),t=await r.json();P(t),!R&&t.length>0&&z(t[0].id)}catch(e){console.error("Failed to load projects:",e)}finally{_(!1)}}},L=async e=>{e.preventDefault(),W(""),await o(T,I)?(D(!1),A(""),O("")):W("Invalid credentials")},U=async e=>{e.preventDefault(),h(!0);try{let e=await fetch("/api/ask",{method:"POST",headers:{"Content-Type":"application/json",...(0,n.g)()},body:JSON.stringify({query:l,user_id:q,project_id:R??void 0})}),r=await e.json();m(r)}catch(e){console.error("Failed to submit:",e)}finally{h(!1)}},N=e=>`$${e.toFixed(2)}`;return r?s.jsx("main",{style:{padding:"2rem",textAlign:"center"},children:s.jsx("p",{children:"Loading..."})}):(0,s.jsxs)("main",{style:{padding:"2rem",maxWidth:"1100px",margin:"0 auto"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Mother-Harness"}),s.jsx("p",{style:{color:"#666",margin:0},children:"Multi-agent orchestration for research, coding, analysis, and design."})]}),s.jsx("div",{children:t?(0,s.jsxs)("div",{style:{textAlign:"right"},children:[s.jsx("p",{style:{margin:0,marginBottom:"0.5rem",fontWeight:500},children:e?.name??e?.email??e?.id}),s.jsx("button",{onClick:d,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"transparent",border:"1px solid #ddd",borderRadius:"6px",cursor:"pointer"},children:"Sign Out"})]}):s.jsx("button",{onClick:()=>D(!0),style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#0070f3",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Sign In"})})]}),B&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,s.jsxs)("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",width:"100%",maxWidth:"400px"},children:[s.jsx("h2",{style:{marginTop:0},children:"Sign In"}),(0,s.jsxs)("form",{onSubmit:L,children:[s.jsx("input",{type:"email",placeholder:"Email",value:T,onChange:e=>A(e.target.value),style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",borderRadius:"6px",border:"1px solid #ddd",fontSize:"1rem"},required:!0}),s.jsx("input",{type:"password",placeholder:"Password",value:I,onChange:e=>O(e.target.value),style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",borderRadius:"6px",border:"1px solid #ddd",fontSize:"1rem"},required:!0}),M&&s.jsx("p",{style:{color:"red",marginBottom:"1rem"},children:M}),(0,s.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[s.jsx("button",{type:"submit",style:{flex:1,padding:"0.75rem",fontSize:"1rem",backgroundColor:"#0070f3",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Sign In"}),s.jsx("button",{type:"button",onClick:()=>D(!1),style:{padding:"0.75rem 1.5rem",fontSize:"1rem",backgroundColor:"transparent",border:"1px solid #ddd",borderRadius:"6px",cursor:"pointer"},children:"Cancel"})]})]})]})}),t&&(0,s.jsxs)("div",{style:{padding:"0.75rem 1rem",backgroundColor:"#e6f7e6",borderRadius:"8px",marginBottom:"1.5rem",fontSize:"0.875rem"},children:["âœ“ Authenticated as ",s.jsx("strong",{children:e?.email??e?.id}),e?.roles&&e.roles.length>0&&(0,s.jsxs)("span",{style:{color:"#666"},children:[" \xb7 Roles: ",e.roles.join(", ")]})]}),(0,s.jsxs)("section",{style:{marginBottom:"2.5rem"},children:[s.jsx("h2",{style:{marginBottom:"1rem"},children:"New Run"}),(0,s.jsxs)("form",{onSubmit:U,style:{marginBottom:"1.5rem"},children:[s.jsx("textarea",{value:l,onChange:e=>a(e.target.value),placeholder:"Describe the workflow you want to run",style:{width:"100%",minHeight:"120px",padding:"1rem",fontSize:"1rem",borderRadius:"8px",border:"1px solid #ddd",marginBottom:"1rem"}}),(0,s.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[s.jsx("button",{type:"submit",disabled:c||!l.trim(),style:{padding:"0.75rem 1.5rem",fontSize:"1rem",backgroundColor:"#0070f3",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",opacity:c||!l.trim()?.6:1},children:c?"Processing...":"Submit"}),(0,s.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[s.jsx("label",{htmlFor:"project-select",style:{fontSize:"0.875rem",color:"#555"},children:"Project"}),(0,s.jsxs)("select",{id:"project-select",value:R??"",onChange:e=>z(e.target.value||null),style:{padding:"0.5rem",borderRadius:"6px",border:"1px solid #ddd",minWidth:"220px"},children:[s.jsx("option",{value:"",children:"Default"}),C.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]})]})]}),p&&(0,s.jsxs)("div",{style:{padding:"1rem",backgroundColor:"#f5f5f5",borderRadius:"8px"},children:[(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Task ID:"})," ",p.task_id]}),(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Status:"})," ",p.status]})]})]}),s.jsx("section",{style:{marginBottom:"2.5rem",display:"grid",gap:"1.5rem"},children:(0,s.jsxs)("div",{style:{border:"1px solid #eee",borderRadius:"12px",padding:"1.5rem"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("h2",{style:{margin:0},children:"Project List"}),s.jsx("button",{type:"button",onClick:E,style:{padding:"0.4rem 0.75rem",borderRadius:"6px",border:"1px solid #ddd",backgroundColor:"white",cursor:"pointer",fontSize:"0.875rem"},children:"Refresh"})]}),k?s.jsx("p",{style:{color:"#666"},children:"Loading projects..."}):s.jsx("div",{style:{marginTop:"1rem",display:"grid",gap:"0.75rem"},children:0===C.length?s.jsx("p",{style:{color:"#666"},children:"No projects yet. Submit a run to create one."}):C.map(e=>(0,s.jsxs)("div",{style:{padding:"0.75rem",borderRadius:"8px",border:e.id===R?"1px solid #0070f3":"1px solid #eee",backgroundColor:e.id===R?"#f0f6ff":"#fafafa",cursor:"pointer"},onClick:()=>z(e.id),onKeyDown:r=>{"Enter"===r.key&&z(e.id)},role:"button",tabIndex:0,children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,s.jsxs)("div",{children:[s.jsx("strong",{children:e.name}),s.jsx("p",{style:{margin:0,color:"#666",fontSize:"0.875rem"},children:e.type})]}),(0,s.jsxs)("div",{style:{textAlign:"right",fontSize:"0.75rem",color:"#666"},children:[s.jsx("div",{children:e.status}),s.jsx("div",{children:new Date(e.last_activity).toLocaleString()})]})]}),(0,s.jsxs)("p",{style:{margin:"0.5rem 0 0",fontSize:"0.75rem",color:"#999"},children:["Threads: ",e.threads.length]})]},e.id))})]})}),(0,s.jsxs)("section",{style:{marginTop:"3rem"},children:[s.jsx("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:"Operational Dashboards"}),!t&&s.jsx("p",{style:{color:"#666"},children:"Sign in to view run history, budgets, and error trends."}),t&&S&&s.jsx("p",{style:{color:"red"},children:S}),t&&f&&s.jsx("p",{style:{color:"#666"},children:"Loading dashboard data..."}),t&&!f&&(0,s.jsxs)("div",{style:{display:"grid",gap:"1.5rem"},children:[(0,s.jsxs)("div",{style:{border:"1px solid #eee",borderRadius:"12px",padding:"1.5rem"},children:[s.jsx("h3",{style:{marginTop:0,marginBottom:"1rem"},children:"Run History"}),0===u.length?s.jsx("p",{style:{color:"#666"},children:"No runs yet."}):(0,s.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{style:{textAlign:"left",color:"#666"},children:[s.jsx("th",{style:{paddingBottom:"0.5rem"},children:"Run"}),s.jsx("th",{style:{paddingBottom:"0.5rem"},children:"Status"}),s.jsx("th",{style:{paddingBottom:"0.5rem"},children:"Created"})]})}),s.jsx("tbody",{children:u.slice(0,6).map(e=>(0,s.jsxs)("tr",{style:{borderTop:"1px solid #f0f0f0"},children:[s.jsx("td",{style:{padding:"0.5rem 0",fontWeight:500},children:e.id}),s.jsx("td",{style:{padding:"0.5rem 0",textTransform:"capitalize"},children:e.status}),s.jsx("td",{style:{padding:"0.5rem 0",color:"#666"},children:new Date(e.created_at).toLocaleString()})]},e.id))})]})]}),(0,s.jsxs)("div",{style:{border:"1px solid #eee",borderRadius:"12px",padding:"1.5rem"},children:[s.jsx("h3",{style:{marginTop:0,marginBottom:"1rem"},children:"Budget Usage"}),g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{style:{display:"flex",gap:"2rem",flexWrap:"wrap"},children:[(0,s.jsxs)("div",{children:[s.jsx("p",{style:{margin:0,color:"#666"},children:"Daily Spend"}),s.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:600},children:N(g.status.daily_spend)}),(0,s.jsxs)("p",{style:{margin:0,color:g.status.daily_warning?"#d97706":"#666"},children:["Remaining: ",N(g.status.daily_remaining)]})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{style:{margin:0,color:"#666"},children:"Monthly Spend"}),s.jsx("p",{style:{margin:0,fontSize:"1.25rem",fontWeight:600},children:N(g.status.monthly_spend)}),(0,s.jsxs)("p",{style:{margin:0,color:g.status.monthly_warning?"#d97706":"#666"},children:["Remaining: ",N(g.status.monthly_remaining)]})]})]}),(0,s.jsxs)("div",{style:{marginTop:"1rem"},children:[s.jsx("p",{style:{marginBottom:"0.5rem",color:"#666"},children:"Spend by Model (Monthly)"}),(0,s.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:0},children:[Object.entries(g.usage.by_model).map(([e,r])=>(0,s.jsxs)("li",{style:{display:"flex",justifyContent:"space-between",padding:"0.25rem 0"},children:[s.jsx("span",{children:e}),s.jsx("span",{style:{fontWeight:500},children:N(r)})]},e)),0===Object.keys(g.usage.by_model).length&&s.jsx("li",{style:{color:"#666"},children:"No spend recorded yet."})]})]})]}):s.jsx("p",{style:{color:"#666"},children:"Budget data unavailable."})]}),(0,s.jsxs)("div",{style:{border:"1px solid #eee",borderRadius:"12px",padding:"1.5rem"},children:[s.jsx("h3",{style:{marginTop:0,marginBottom:"1rem"},children:"Error Trends (Last 7 Days)"}),j?s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:j.days.map(e=>{let r=Object.values(e.errors).reduce((e,r)=>e+r,0),t=Math.min(20*r,240);return(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[s.jsx("span",{style:{width:"90px",fontSize:"0.8rem",color:"#666"},children:e.date}),s.jsx("div",{style:{flex:1,backgroundColor:"#f3f4f6",borderRadius:"999px",overflow:"hidden"},children:s.jsx("div",{style:{width:`${t}px`,height:"8px",backgroundColor:r>0?"#ef4444":"#a3a3a3"}})}),s.jsx("span",{style:{minWidth:"24px",textAlign:"right",fontSize:"0.8rem"},children:r})]},e.date)})}):s.jsx("p",{style:{color:"#666"},children:"No error data available."})]})]})]})]})}},167:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>o,a:()=>d,g:()=>l});var s=t(7122),i=t(3217);let n=(0,i.createContext)(null);function o({children:e}){let[r,t]=(0,i.useState)(null),[o,d]=(0,i.useState)(!0),[l,a]=(0,i.useState)(null),c=(0,i.useCallback)(async(e,r)=>{d(!0),a(null);try{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})});if(!s.ok){let e=await s.json();return a(e.error??"Login failed"),d(!1),!1}let{token:i}=await s.json(),n=function(e){try{let r=e.split(".");if(3!==r.length)return null;let t=JSON.parse(atob(r[1].replace(/-/g,"+").replace(/_/g,"/")));if(t.exp&&t.exp<Date.now()/1e3)return null;return{id:t.sub,email:t.email,name:t.name,roles:t.roles??["user"]}}catch{return null}}(i);return t(n),d(!1),!0}catch(e){return a(e instanceof Error?e.message:"Login failed"),d(!1),!1}},[]),h=(0,i.useCallback)(async()=>{t(null);try{await fetch("/api/auth/logout",{method:"POST"})}catch{}},[]);return s.jsx(n.Provider,{value:{user:r,loading:o,error:l,login:c,logout:h,isAuthenticated:!!r},children:e})}function d(){let e=(0,i.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function l(){return{}}},3895:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var s=t(7114);t(1515);var i=t(9914);let n=(0,i.createProxy)(String.raw`C:\Users\rober\Documents\mother-harness\services\dashboard\lib\auth.tsx#AuthProvider`);function o({children:e}){return(0,s.jsxs)("html",{lang:"en",children:[(0,s.jsxs)("head",{children:[s.jsx("title",{children:"Mother-Harness"}),s.jsx("meta",{name:"description",content:"Multi-agent orchestration dashboard"})]}),s.jsx("body",{children:s.jsx(n,{children:e})})]})}(0,i.createProxy)(String.raw`C:\Users\rober\Documents\mother-harness\services\dashboard\lib\auth.tsx#useAuth`),(0,i.createProxy)(String.raw`C:\Users\rober\Documents\mother-harness\services\dashboard\lib\auth.tsx#getAuthHeaders`)},7144:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(9914).createProxy)(String.raw`C:\Users\rober\Documents\mother-harness\services\dashboard\app\page.tsx#default`)}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[547],()=>t(3817));module.exports=s})();